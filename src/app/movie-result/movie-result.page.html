<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>
            Recommendation
        </ion-title>
    </ion-toolbar>
    <ion-fab vertical="top" horizontal="end" edge=true>
        <ion-fab-button class="fab-main-button">
            <ion-icon name="settings"></ion-icon>
        </ion-fab-button>
        <ion-fab-list>
            <div>
            <ion-label class="fab-label">Refine Request</ion-label>
            <ion-button (click)="changeRequest()">
                <ion-icon name="md-swap"></ion-icon>
            </ion-button>
            </div>
            <div>
            <ion-label class="fab-label">Share</ion-label>
            <ion-button (click)="shareResult()">
                <ion-icon name="share"></ion-icon>
            </ion-button>
            </div>
        </ion-fab-list>
    </ion-fab>
</ion-header>
<ion-content padding>
    <ion-card *ngFor="let movie of movies.result">
        <ion-img src={{movie.image}}></ion-img>
        <ion-fab vertical="top" horizontal="start" class="fab-rating" (click)="disableFavourite(movie)">
            <ion-fab-button>
                <ion-icon name="star"
                          [class]="movie.rating > 0 ? 'icon-rating rating-yellow' : 'icon-rating rating-light' "></ion-icon>
                <ion-label *ngIf="movie.rating > 0" class="icon-rating-label">{{movie.rating}}</ion-label>
            </ion-fab-button>
            <ion-fab-list side="end" class="fab-rating-list">
                <label class="rating-label">How do you like this movie?</label>
                <ion-fab-button class="fab-rating-button" (click)="setRating(1, movie)">
                    <ion-icon name="star" [id]="'rating1' + movie.id"></ion-icon>
                </ion-fab-button>
                <ion-fab-button class="fab-rating-button" (click)="setRating(2, movie)">
                    <ion-icon name="star" [id]="'rating2' + movie.id"></ion-icon>
                </ion-fab-button>
                <ion-fab-button class="fab-rating-button" (click)="setRating(3, movie)">
                    <ion-icon name="star" [id]="'rating3' + movie.id"></ion-icon>
                </ion-fab-button>
                <ion-fab-button class="fab-rating-button" (click)="setRating(4, movie)">
                    <ion-icon name="star" [id]="'rating4' + movie.id"></ion-icon>
                </ion-fab-button>
                <ion-fab-button class="fab-rating-button" (click)="setRating(5, movie)">
                    <ion-icon name="star" [id]="'rating5' + movie.id"></ion-icon>
                </ion-fab-button>
            </ion-fab-list>
        </ion-fab>
        <!--<ion-fab vertical="top" horizontal="end" class="fab-favourite" >-->
        <ion-icon *ngIf="disableCorrectFavourite(movie)" [name]="movie.favourite ? 'heart' : 'heart-empty'"
                  class="favourite-icon" (click)="addToFavourite(movie)"></ion-icon>
        <ion-card-header>
            <ion-card-title>{{movie.title}} ({{movie.year}})</ion-card-title>
            {{movie.actors}}
            <!--<ion-card-subtitle>Brat Pitt, Liam Hemsworth, Max Mustermann</ion-card-subtitle>-->
        </ion-card-header>
        <ion-card-content>
            <ion-grid>
                <ion-row>
                    <ion-col>
                        <ion-button expand="block" side="left" (click)="openImdb(movie)" class="goTo-Button">
                            <ion-img class="button-img" src="../../assets/image/logo/imdb_logo.png"></ion-img>
                        </ion-button>
                    </ion-col>
                    <ion-col>
                        <ion-button expand="block" side="right" (click)="openAmazonVideo(movie)" class="goTo-Button">
                            <ion-img class="button-img" src="../../assets/image/logo/amazon_logo.png"></ion-img>
                        </ion-button>
                    </ion-col>
                    <ion-col>
                        <ion-button expand="block" side="right" (click)="openYoutube(movie)" class="goTo-Button">
                            <ion-img class="button-img" src="../../assets/image/logo/youtube.png"></ion-img>
                        </ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-card-content>
        <ion-button *ngIf="movie_rec_rating_map[movie.id]" expand="block" class="rate-button goTo-Button" (click)="displayRecommendationRating(movie)">How satisfied are you<br>with the recommended movie?</ion-button>
        <ion-grid *ngIf="!movie_rec_rating_map[movie.id]" class="rate-grid">
            <ion-row align-items-center class="rate-row">
                <ion-col [id]="'recrating1' + movie.id" class="rate-thumps" (click)="setRecommendationRating(1, movie)">
                    <img [id]="'recrating1img' + movie.id" src="../../assets/image/rating/1_line.svg" class="emoji">
                </ion-col>
                <ion-col [id]="'recrating2' + movie.id" class="rate-thumps" (click)="setRecommendationRating(2, movie)">
                    <img [id]="'recrating2img' + movie.id" src="../../assets/image/rating/2_line.svg" class="emoji">
                </ion-col>
                <ion-col [id]="'recrating3' + movie.id" class="rate-thumps" (click)="setRecommendationRating(3, movie)">
                    <img [id]="'recrating3img' + movie.id" src="../../assets/image/rating/3_line.svg" class="emoji">
                </ion-col>
                <ion-col [id]="'recrating4' + movie.id" class="rate-thumps"(click)="setRecommendationRating(4, movie)">
                    <img [id]="'recrating4img' + movie.id" src="../../assets/image/rating/4_line.svg" class="emoji">
                </ion-col>
                <ion-col [id]="'recrating5' + movie.id" class="rate-thumps" (click)="setRecommendationRating(5, movie)">
                    <img [id]="'recrating5img' + movie.id" src="../../assets/image/rating/5_line.svg" class="emoji">
                </ion-col>
            </ion-row>
        </ion-grid>

    </ion-card>
</ion-content>